<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" crossorigin="anonymous">    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="style.css">
    <title>Document</title>
</head>
<body>
   <!-- Login 9 - Bootstrap Brain Component -->
    <section class="bg-primary py-3 py-md-5 py-xl-8 d-flex align-items-center justify-content-center min-vh-100"> 
        <div class="container">
            <div class="row gy-4 align-items-center">
            <div class="col-12 col-md-6 col-xl-7">
                <div class="d-flex justify-content-center text-bg-primary">
                <div class="col-12 col-xl-9">
                    <img class="img-fluid rounded mb-4" loading="lazy" src="assets/img/logo-light.png" width="245" height="80" alt="BootstrapBrain Logo">
                    <hr class="border-primary-subtle mb-4">
                    <h2 class="h1 mb-4">Bienvenue dans votre platforme.</h2>
                    <p class="lead mb-5">Vous pouvez calculer le materiel des écoles depuis une seul plateform.</p>
                    <div class="text-endx">
                    <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" fill="currentColor" class="bi bi-grip-horizontal" viewBox="0 0 16 16">
                        <path d="M2 8a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm0-3a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm3 3a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm0-3a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm3 3a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm0-3a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm3 3a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm0-3a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm3 3a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm0-3a1 1 0 1 1 0 2 1 1 0 0 1 0-2z" />
                    </svg>
                    </div>
                </div>
                </div>
            </div>
            <div class="col-12 col-md-6 col-xl-5">
                <div class="card border-0 rounded-4">
                <div class="card-body p-3 p-md-4 p-xl-5">
                    <div class="row">
                    <div class="col-12">
                        <div class="mb-4">
                        <div id="error_message" class="alert alert-danger d-none" role="alert">
                        </div>
                        <h3>Se connecter</h3>
                        <!-- <p>Don't have an account? <a href="#!">Sign up</a></p> -->
                        </div>
                    </div>
                    </div>
                    <form id="loginForm">
                    <div class="row gy-3 overflow-hidden">
                        <div class="col-12">
                        <div class="form-floating mb-3">
                            <input type="email" class="form-control" name="email" id="email" placeholder="name@example.com" required>
                            <label for="email" class="form-label">E-mail</label>
                        </div>
                        </div>
                        <div class="col-12">
                        <div class="form-floating mb-3">
                            <input type="password" class="form-control" name="password" id="password" value="" placeholder="Password" required>
                            <label for="password" class="form-label">Mot de passe</label>
                        </div>
                        </div>
                        <div class="col-12">
                        <div class="form-check">
                            <input class="form-check-input" checked type="checkbox" value="" name="remember_me" id="remember_me">
                            <label class="form-check-label text-secondary" for="remember_me">
                            Rester connecté
                            </label>
                        </div>
                        </div>
                        <div class="col-12">
                        <div class="d-grid">
                            <button class="btn btn-primary btn-lg" type="submit">Connectez-vous</button>
                        </div>
                        </div>
                    </div>
                    </form>
                    <div class="row">
                    <!-- <div class="col-12">
                        <div class="d-flex gap-2 gap-md-4 flex-column flex-md-row justify-content-md-end mt-4">
                        <a href="#!">Forgot password</a>
                        </div>
                    </div> -->
                    </div>
                </div>
                </div>
            </div>
            </div>
        </div>
    </section> 
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
    $('#loginForm').on('submit', function(e) {
      e.preventDefault();
      $('#error_message').addClass('d-none').text('');

      $.ajax({
        url: 'login.php',
        method: 'POST',
        data: $(this).serialize(),
        dataType: 'json'
      })
      .done(function(resp) {
        if (resp.status === 'success') {
          if (resp.role === 'financier') {
            window.location.href = 'dashboard.php';
          } else {
            window.location.href = 'index.php';
          }
        } else {
          $('#error_message').removeClass('d-none').text(resp.message);
        }
      })
      .fail(function() {
        $('#error_message').removeClass('d-none').text('Erreur serveur, réessayez plus tard.');
      });
    });
  </script>
</body>
</html>